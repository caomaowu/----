# 压铸项目管理系统方案

## 1. 需求定义

### 1.1 核心痛点
- 查找历史项目资料耗时严重（当前无索引，依赖人工记忆路径）
- 项目文件夹创建重复性高，结构不统一
- 文件命名混乱，版本追溯困难

### 1.2 用户画像
- 个人使用，Windows系统
- 非技术背景，要求界面美观（拒绝工业风）
- 响应速度敏感（操作反馈<300ms）
- 未来可能需要扩展功能（成本计算、试模数据等）

### 1.3 功能需求

| 优先级 | 功能 | 说明 |
|:---|:---|:---|
| P0 | 智能项目创建 | 选择月份→输入客户/产品→自动生成编号和文件夹结构 |
| P0 | 全文搜索 | 支持文件名、项目元数据（客户、产品、标签）模糊匹配。**不包含**Office/PDF文档内容。 |
| P0 | 多视图浏览 | 网格视图（默认）、列表视图、时间线视图 |
| P1 | 标签系统 | 自定义标签（#气孔 #试模 #量产），支持多标签筛选 |
| P1 | 最近项目 | 智能排序，支持置顶常用项目 |
| P2 | 压铸插件 | 试模记录表单、缺陷分类库、模流分析文件关联 |
| P2 | 3D缩略图 | 自动生成3D模型预览图（暂时搁置） |
| P3 | 数据导出 | 项目统计报表、年度汇总Excel（后续） |

---

## 2. 技术架构

### 2.1 技术栈
- **框架**: PyQt6 + PyQt-Fluent-Widgets（微软Fluent Design）
- **语言**: Python 3.10+
- **数据库**: SQLite（FTS5全文索引）
- **索引**: Whoosh（中文分词支持）

### 2.2 文件结构
📁 压铸项目库（用户指定主目录）
├── .pm_system/              # 系统数据（隐藏文件夹）
│   ├── config.json          # 用户配置
│   ├── index.sqlite         # 全文索引（可重建）
│   └── cache/               # 缩略图缓存
│
├── 📁 2024-01/
│   └── 📁 PRJ-202401-001_客户A_变速箱壳体/
│       ├── 📁 01_3D文件/
│       │   ├── 📁 01_客户原始数据/
│       │   ├── 📁 02_模具设计/
│       │   ├── 📁 03_模流分析/
│       │   └── 📁 04_最终版本/
│       ├── 📁 02_技术文档/
│       │   ├── 📁 DFM报告/
│       │   ├── 📁 压铸工艺参数/
│       │   └── 📁 材料规格书/
│       ├── 📁 03_项目资料/
│       │   ├── 📁 合同报价/
│       │   ├── 📁 会议纪要/
│       │   └── 📁 变更记录/
│       ├── 📁 04_图片资料/
│       │   ├── 📁 样品照片/
│       │   ├── 📁 试模照片/
│       │   └── 📁 缺陷记录/
│       ├── 📁 05_交付物/
│       └── .project.json    # 项目元数据（关键）
│
└── 📁 归档项目/              # 手动归档，不参与默认搜索

### 2.3 数据结构定义 (.project.json)
```json
{
  "id": "PRJ-202401-001",           // 项目编号（唯一ID）
  "name": "变速箱壳体",              // 产品名称
  "customer": "客户A",              // 客户名称
  "customer_code": "CUST-001",      // 客户代码（可选）
  "part_number": "DWG-2024-001-A",  // 零件号/图号
  "create_time": "2024-01-15T10:00:00", // 创建时间
  "status": "ongoing",              // 状态：ongoing(进行中), delivered(已交付), archived(归档)
  "tags": ["气孔", "试模", "T1"],     // 标签列表，等等
  "description": "项目备注信息..."    // 备注
}
```

### 2.4 编号规则
- **格式**: `PRJ-{YYYY}{MM}-{NNN}`
- **示例**: `PRJ-202401-001`
- **规则**: 按月流水，每月初重置流水号为 001。

---

## 3. 软件UI
- 1️⃣ 基础引用方式
  请参考我的UI设计 @main_v2.py @UI设计文档.md
- 参考UI设计文档 ：C:\Users\gcb\Desktop\管理软件\UI设计文档.md
- 保持风格：遵循现有的卡片设计、颜色系统、间距规范